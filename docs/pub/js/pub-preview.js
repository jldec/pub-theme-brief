!function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}}()({1:[function(t,e,n){(function(t){(function(){var r,i;r=this,i=function(){"use strict";var e=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},n=v,r=c,i=function(t){return h(c(t))},o=h,a=d,s=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function c(t){for(var e,n=[],r=0,i=0,o="";null!=(e=s.exec(t));){var a=e[0],c=e[1],h=e.index;if(o+=t.slice(i,h),i=h+a.length,c)o+=c[1];else{o&&(n.push(o),o="");var u=e[2],f=e[3],l=e[4],d=e[5],v=e[6],g=e[7],m="+"===v||"*"===v,w="?"===v||"*"===v,y=u||"/",b=l||d||(g?".*":"[^"+y+"]+?");n.push({name:f||r++,prefix:u||"",delimiter:y,optional:w,repeat:m,pattern:p(b)})}}return i<t.length&&(o+=t.substr(i)),o&&n.push(o),n}function h(t){for(var n=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(n[r]=new RegExp("^"+t[r].pattern+"$"));return function(r){for(var i="",o=r||{},a=0;a<t.length;a++){var s=t[a];if("string"!=typeof s){var c,h=o[s.name];if(null==h){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to be defined')}if(e(h)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received "'+h+'"');if(0===h.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var u=0;u<h.length;u++){if(c=encodeURIComponent(h[u]),!n[a].test(c))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received "'+c+'"');i+=(0===u?s.prefix:s.delimiter)+c}}else{if(c=encodeURIComponent(h),!n[a].test(c))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+c+'"');i+=s.prefix+c}}else i+=s}return i}}function u(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function p(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function f(t,e){return t.keys=e,t}function l(t){return t.sensitive?"":"i"}function d(t,e){for(var n=(e=e||{}).strict,r=!1!==e.end,i="",o=t[t.length-1],a="string"==typeof o&&/\/$/.test(o),s=0;s<t.length;s++){var c=t[s];if("string"==typeof c)i+=u(c);else{var h=u(c.prefix),p=c.pattern;c.repeat&&(p+="(?:"+h+p+")*"),i+=p=c.optional?h?"(?:"+h+"("+p+"))?":"("+p+")?":h+"("+p+")"}}return n||(i=(a?i.slice(0,-2):i)+"(?:\\/(?=$))?"),i+=r?"$":n&&a?"":"(?=\\/|$)",new RegExp("^"+i,l(e))}function v(t,n,r){return e(n=n||[])?r||(r={}):(r=n,n=[]),t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return f(t,e)}(t,n):e(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(v(t[i],e,n).source);return f(new RegExp("(?:"+r.join("|")+")",l(n)),e)}(t,n,r):function(t,e,n){for(var r=c(t),i=d(r,n),o=0;o<r.length;o++)"string"!=typeof r[o]&&e.push(r[o]);return f(i,e)}(t,n,r)}n.parse=r,n.compile=i,n.tokensToFunction=o,n.tokensToRegExp=a;var g,m="undefined"!=typeof document,w="undefined"!=typeof window,y="undefined"!=typeof history,b=void 0!==t,_=m&&document.ontouchstart?"touchstart":"click",x=w&&!(!window.history.location&&!window.location);function R(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function E(t,e){if("function"==typeof t)return E.call(this,"*",t);if("function"==typeof e)for(var n=new U(t,null,this),r=1;r<arguments.length;++r)this.callbacks.push(n.middleware(arguments[r]));else"string"==typeof t?this["string"==typeof e?"redirect":"show"](t,e):this.start(t)}function T(t,e,n){var r=this.page=n||E,i=r._window,o=r._hashbang,a=r._getBase();"/"===t[0]&&0!==t.indexOf(a)&&(t=a+(o?"#!":"")+t);var s=t.indexOf("?");this.canonicalPath=t;var c=new RegExp("^"+a.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"));if(this.path=t.replace(c,"")||"/",o&&(this.path=this.path.replace("#!","")||"/"),this.title=m&&i.document.title,this.state=e||{},this.state.path=t,this.querystring=~s?r._decodeURLEncodedURIComponent(t.slice(s+1)):"",this.pathname=r._decodeURLEncodedURIComponent(~s?t.slice(0,s):t),this.params={},this.hash="",!o){if(!~this.path.indexOf("#"))return;var h=this.path.split("#");this.path=this.pathname=h[0],this.hash=r._decodeURLEncodedURIComponent(h[1])||"",this.querystring=this.querystring.split("#")[0]}}function U(t,e,r){var i=this.page=r||j,o=e||{};o.strict=o.strict||i._strict,this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=n(this.path,this.keys=[],o)}R.prototype.configure=function(t){var e=t||{};this._window=e.window||w&&window,this._decodeURLComponents=!1!==e.decodeURLComponents,this._popstate=!1!==e.popstate&&w,this._click=!1!==e.click&&m,this._hashbang=!!e.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):w&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(_,this.clickHandler,!1):m&&n.document.removeEventListener(_,this.clickHandler,!1),this._hashbang&&w&&!y?n.addEventListener("hashchange",this._onpopstate,!1):w&&n.removeEventListener("hashchange",this._onpopstate,!1)},R.prototype.base=function(t){if(0===arguments.length)return this._base;this._base=t},R.prototype._getBase=function(){var t=this._base;if(t)return t;var e=w&&this._window&&this._window.location;return w&&this._hashbang&&e&&"file:"===e.protocol&&(t=e.pathname),t},R.prototype.strict=function(t){if(0===arguments.length)return this._strict;this._strict=t},R.prototype.start=function(t){var e=t||{};if(this.configure(e),!1!==e.dispatch){var n;if(this._running=!0,x){var r=this._window.location;n=this._hashbang&&~r.hash.indexOf("#!")?r.hash.substr(2)+r.search:this._hashbang?r.search+r.hash:r.pathname+r.search+r.hash}this.replace(n,null,!0,e.dispatch)}},R.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var t=this._window;this._click&&t.document.removeEventListener(_,this.clickHandler,!1),w&&t.removeEventListener("popstate",this._onpopstate,!1),w&&t.removeEventListener("hashchange",this._onpopstate,!1)}},R.prototype.show=function(t,e,n,r){var i=new T(t,e,this),o=this.prevContext;return this.prevContext=i,this.current=i.path,!1!==n&&this.dispatch(i,o),!1!==i.handled&&!1!==r&&i.pushState(),i},R.prototype.back=function(t,e){var n=this;if(this.len>0){var r=this._window;y&&r.history.back(),this.len--}else t?setTimeout(function(){n.show(t,e)}):setTimeout(function(){n.show(n._getBase(),e)})},R.prototype.redirect=function(t,e){var n=this;"string"==typeof t&&"string"==typeof e&&E.call(this,t,function(t){setTimeout(function(){n.replace(e)},0)}),"string"==typeof t&&void 0===e&&setTimeout(function(){n.replace(t)},0)},R.prototype.replace=function(t,e,n,r){var i=new T(t,e,this),o=this.prevContext;return this.prevContext=i,this.current=i.path,i.init=n,i.save(),!1!==r&&this.dispatch(i,o),i},R.prototype.dispatch=function(t,e){var n=0,r=0,i=this;function o(){var e=i.callbacks[n++];if(t.path===i.current)return e?void e(t,o):function(t){if(t.handled)return;var e,n=this._window;e=this._hashbang?x&&this._getBase()+n.location.hash.replace("#!",""):x&&n.location.pathname+n.location.search;if(e===t.canonicalPath)return;this.stop(),t.handled=!1,x&&(n.location.href=t.canonicalPath)}.call(i,t);t.handled=!1}e?function t(){var n=i.exits[r++];if(!n)return o();n(e,t)}():o()},R.prototype.exit=function(t,e){if("function"==typeof t)return this.exit("*",t);for(var n=new U(t,null,this),r=1;r<arguments.length;++r)this.exits.push(n.middleware(arguments[r]))},R.prototype.clickHandler=function(t){if(1===this._which(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){var e=t.target,n=t.path||(t.composedPath?t.composedPath():null);if(n)for(var r=0;r<n.length;r++)if(n[r].nodeName&&"A"===n[r].nodeName.toUpperCase()&&n[r].href){e=n[r];break}for(;e&&"A"!==e.nodeName.toUpperCase();)e=e.parentNode;if(e&&"A"===e.nodeName.toUpperCase()){var i="object"==typeof e.href&&"SVGAnimatedString"===e.href.constructor.name;if(!e.hasAttribute("download")&&"external"!==e.getAttribute("rel")){var o=e.getAttribute("href");if((this._hashbang||!this._samePath(e)||!e.hash&&"#"!==o)&&!(o&&o.indexOf("mailto:")>-1)&&(i?!e.target.baseVal:!e.target)&&(i||this.sameOrigin(e.href))){var a=i?e.href.baseVal:e.pathname+e.search+(e.hash||"");a="/"!==a[0]?"/"+a:a,b&&a.match(/^\/[a-zA-Z]:\//)&&(a=a.replace(/^\/[a-zA-Z]:\//,"/"));var s=a,c=this._getBase();0===a.indexOf(c)&&(a=a.substr(c.length)),this._hashbang&&(a=a.replace("#!","")),(!c||s!==a||x&&"file:"===this._window.location.protocol)&&(t.preventDefault(),this.show(s))}}}}},R.prototype._onpopstate=(g=!1,w?(m&&"complete"===document.readyState?g=!0:window.addEventListener("load",function(){setTimeout(function(){g=!0},0)}),function(t){if(g)if(t.state){var e=t.state.path;this.replace(e,t.state)}else if(x){var n=this._window.location;this.show(n.pathname+n.search+n.hash,void 0,void 0,!1)}}):function(){}),R.prototype._which=function(t){return null==(t=t||w&&this._window.event).which?t.button:t.which},R.prototype._toURL=function(t){var e=this._window;if("function"==typeof URL&&x)return new URL(t,e.location.toString());if(m){var n=e.document.createElement("a");return n.href=t,n}},R.prototype.sameOrigin=function(t){if(!t||!x)return!1;var e=this._toURL(t),n=this._window.location;return n.protocol===e.protocol&&n.hostname===e.hostname&&(n.port===e.port||""===n.port&&(80==e.port||443==e.port))},R.prototype._samePath=function(t){if(!x)return!1;var e=this._window.location;return t.pathname===e.pathname&&t.search===e.search},R.prototype._decodeURLEncodedURIComponent=function(t){return"string"!=typeof t?t:this._decodeURLComponents?decodeURIComponent(t.replace(/\+/g," ")):t},T.prototype.pushState=function(){var t=this.page,e=t._window,n=t._hashbang;t.len++,y&&e.history.pushState(this.state,this.title,n&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},T.prototype.save=function(){var t=this.page;y&&t._window.history.replaceState(this.state,this.title,t._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},U.prototype.middleware=function(t){var e=this;return function(n,r){if(e.match(n.path,n.params))return n.routePath=e.path,t(n,r);r()}},U.prototype.match=function(t,e){var n=this.keys,r=t.indexOf("?"),i=~r?t.slice(0,r):t,o=this.regexp.exec(decodeURIComponent(i));if(!o)return!1;delete e[0];for(var a=1,s=o.length;a<s;++a){var c=n[a-1],h=this.page._decodeURLEncodedURIComponent(o[a]);void 0===h&&hasOwnProperty.call(e,c.name)||(e[c.name]=h)}return!0};var j=function t(){var e=new R;function n(){return E.apply(e,arguments)}return n.callbacks=e.callbacks,n.exits=e.exits,n.base=e.base.bind(e),n.strict=e.strict.bind(e),n.start=e.start.bind(e),n.stop=e.stop.bind(e),n.show=e.show.bind(e),n.back=e.back.bind(e),n.redirect=e.redirect.bind(e),n.replace=e.replace.bind(e),n.dispatch=e.dispatch.bind(e),n.exit=e.exit.bind(e),n.configure=e.configure.bind(e),n.sameOrigin=e.sameOrigin.bind(e),n.clickHandler=e.clickHandler.bind(e),n.create=t,Object.defineProperty(n,"len",{get:function(){return e.len},set:function(t){e.len=t}}),Object.defineProperty(n,"current",{get:function(){return e.current},set:function(t){e.current=t}}),n.Context=T,n.Route=U,n}(),L=j,O=j;return L.default=O,L},"object"==typeof n&&void 0!==e?e.exports=i():"function"==typeof define&&define.amd?define(i):r.page=i()}).call(this)}).call(this,t("_process"))},{_process:2}],2:[function(t,e,n){var r,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var h,u=[],p=!1,f=-1;function l(){p&&h&&(p=!1,h.length?u=h.concat(u):f=-1,u.length&&d())}function d(){if(!p){var t=c(l);p=!0;for(var e=u.length;e;){for(h=u,u=[];++f<e;)h&&h[f].run();f=-1,e=u.length}h=null,p=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new v(t,e)),1!==u.length||p||c(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],3:[function(t,e,n){e.exports=function(e,n){var r=n.$,i=e.opts,o=e.util,a=e.handlebars.pageLang,s=i.log,c=r("[data-render-layout]");return{start:function(){s("jqueryview start"),e.on("nav",h),e.on("loaded",h),e.on("updatedText",u)},stop:function(){s("jqueryview stop"),e.off("nav",h),e.off("loaded",h),e.off("updatedText",u)}};function h(h,u,p,f){s("jqueryview nav %s%s%s %s",h,u||"",p||"",!!f);var l=f||!h;h=h||location.pathname,u=u||l&&location.search||"",p=p||l&&location.hash||"";var d=e.findPage(h);if(!d)return e.emit("notify","Oops, jqueryview cannot find new page object "+h);var v=o.unPrefix(location.pathname,i.staticRoot),g=e.findPage(v);if(!g)return e.emit("notify","Oops, jqueryview cannot find current page object "+v);if(l||d!==g){if(e.req={query:u?t("querystring").parse(u.slice(1)):{}},c.length&&(l||function(t,n){if(t&&t.fixlayout)return!0;if(a(t)!==a(n))return!0;var r=c.attr("data-render-layout")||"main-layout";return e.layoutTemplate(n)!==r}(g,d)))return m=e.layoutTemplate(d),c.html(e.renderLayout(d)),c.attr("data-render-layout",m),s("jqueryview updateLayout",h,u,p),void e.emit("update-view",h,u,p,n,c);var m;!function(){var t=r("[data-render-page]");if(!t.length)return e.emit("notify","Oops, jqueryview cannot update page "+h);t.html(e.renderPage(d)),t.attr("data-render-page",d._href),s("jqueryview updatePage:",h,u,p),e.emit("update-view",h,u,p,n,t)}()}}function u(t){var a=e.fragment$[t];if(!a)return e.emit("notify","Oops, jqueryview cannot find fragment: "+t);var c=r('[data-render-html="'+t+'"]');if(!c.length)return e.emit("notify","Oops, jqueryview cannot update html for fragment: "+t);c.html(e.renderHtml(a));var h=o.unPrefix(location.pathname,i.staticRoot);s("jqueryview updateHtml",h,location.search,location.hash),e.emit("update-view",h,location.search,location.hash,n,c)}}},{querystring:7}],4:[function(t,e,n){$(function(){var e=window.parent.generator;if(!e)throw new Error("cannot bind preview to pub-generator");var n=e.util,r=e.opts,i=r.log,o=r.appUrl;window.generator=e,t("./jqueryview")(e,window).start();var a=window.parent.location.search?t("querystring").parse(window.parent.location.search.slice(1)).page:"";a||(a=n.unPrefix(n.unPrefix(window.parent.location.pathname,r.staticRoot),r.editorPrefix)),window.pager=t("page"),window.pager("*",function(t){var s=t.path;s=n.unPrefix(s,o),s=(s=n.unPrefix(s,r.staticRoot)).split("?")[0],i("pager nav %s%s%s%s",s,t.querystring?"?"+t.querystring:"",t.hash?"#"+t.hash:"",a?" (forceReload)":""),e.emit("nav",s,t.querystring?"?"+t.querystring:"",t.hash?"#"+t.hash:"",!!a),a=void 0}),window.pager({dispatch:!1}),a&&pager.show(a),window.onGenerator&&window.onGenerator(e)})},{"./jqueryview":3,page:1,querystring:7}],5:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var h=t.length;c>0&&h>c&&(h=c);for(var u=0;u<h;++u){var p,f,l,d,v=t[u].replace(s,"%20"),g=v.indexOf(n);g>=0?(p=v.substr(0,g),f=v.substr(g+1)):(p=v,f=""),l=decodeURIComponent(p),d=decodeURIComponent(f),r(a,l)?i(a[l])?a[l].push(d):a[l]=[a[l],d]:a[l]=d}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],6:[function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),function(a){var s=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],function(t){return s+encodeURIComponent(r(t))}).join(e):s+encodeURIComponent(r(t[a]))}).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],7:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":5,"./encode":6}]},{},[4]);